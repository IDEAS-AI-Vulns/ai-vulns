package io.mixeway.mixewayflowapi.domain.settingsexploitability;

import io.mixeway.mixewayflowapi.api.admin.dto.SettingsExploitabilityDTO;
import io.mixeway.mixewayflowapi.db.entity.SettingsExploitability;
import io.mixeway.mixewayflowapi.db.mapper.SettingsExploitabilityMapper;
import io.mixeway.mixewayflowapi.db.repository.SettingsExploitabilityRepository;
import lombok.RequiredArgsConstructor;
import lombok.extern.log4j.Log4j2;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
@RequiredArgsConstructor
@Log4j2
public class UpdateSettingsExploitabilityService {
    private final SettingsExploitabilityRepository settingsExploitabilityRepository;
    private final FindExploitabilitySettingsService findExploitabilitySettingsService;
    private final SettingsExploitabilityMapper settingsExploitabilityMapper;

    @Transactional
    public void changeSettings(SettingsExploitabilityDTO settingsExploitabilityDTO) {
        SettingsExploitability settings = findExploitabilitySettingsService.get();
        settingsExploitabilityMapper.updateEntityFromDto(settingsExploitabilityDTO, settings);

        settingsExploitabilityRepository.save(settings);

    }
}
